"use strict";angular.module("authModule",[]),angular.module("homeModule",[]),angular.module("userModule",[]),angular.module("moheera",["ui.bootstrap","ui.router","authModule","homeModule","userModule","ngResource"]).config(["$urlRouterProvider","$stateProvider",function(e,o){e.otherwise("/"),o.state("home",{url:"/",templateUrl:"public/modules/home/view/index.home.view.html",controller:"indexHomeController"}).state("contact",{url:"/contact",templateUrl:"public/modules/home/view/contact.home.view.html",controller:"indexHomeController"}).state("about",{url:"/about",templateUrl:"public/modules/home/view/about.home.view.html",controller:"indexHomeController"}).state("signin",{url:"/signin",templateUrl:"public/modules/auth/view/signin.auth.view.html",controller:"signinAuthController"}).state("signup",{url:"/signup",templateUrl:"public/modules/auth/view/signup.auth.view.html",controller:"signupAuthController"}).state("signout",{url:"signout",controller:"signoutAuthController"}).state("profile",{url:"/profile",templateUrl:"public/modules/user/view/profile.user.view.html",controller:"profileUserControlller"})}]).run(["$rootScope",function(e){e.logged=!1}]),angular.module("authModule").controller("signinAuthController",["registerUserConfigFactory","$scope","$http","$location",function(e,o,r,t){o.signIn=function(){r.post("/login",o.credentials).success(function(o){e.setUser(o),t.path("/profile")}).error(function(e){o.error=e})}}]),angular.module("authModule").controller("signoutAuthController",["registerUserConfigFactory","$http","$location",function(e,o,r){o.get("/logout").success(function(){e.clearUserInfo(),r.path("/")})}]),angular.module("authModule").controller("signupAuthController",["registerUserConfigFactory","$scope","$http","$location",function(){}]),angular.module("authModule").factory("connectAuthFactory",["$resource",function(e){return e("http://localhost:3000/user",{},{query:{method:"GET"},post:{method:"POST"},update:{method:"PUT"},remove:{method:"DELETE"}})}]),angular.module("moheera").factory("errorAuthFactory",["response","$location",function(e,o){switch(e){case 404:o.path("/login");break;case 403:o.path("/login");break;case 500:o.path("/login");break;default:o.path("/login")}}]),angular.module("moheera").controller("navMenu",["$rootScope","$scope",function(e,o){o.navbarCollapsed=!1,o.$on("$stateChangeSuccess",function(){o.navbarCollapsed=!1}),e.$watch("logged",function(){e.logged?(o.signOutLink=!0,o.signInLink=!1,o.signUpLink=!1):(o.signOutLink=!1,o.signInLink=!0,o.signUpLink=!0)})}]),angular.module("moheera").controller("userConfigController",["registerUserConfigFactory","$scope",function(e,o){o.registerUser=e}]),angular.module("moheera").factory("registerUserConfigFactory",["$window","$rootScope","$q",function(e,o,r){var t={};return t.user=!1,t.readUserInfo=function(){return t.user=e.userInfo||!1,t.user},t.clearUserInfo=function(){o.logged=!1,t.user=e.userInfo=!1},t.setUser=function(r){t.user=e.userInfo=r||!1,t.user&&(o.logged=!0)},t.getUser=function(){var e=r.defer();return e.resolve(t.readUserInfo()),e.promise.then(function(e){e&&(t.user=e,o.logged=!0)}),t.user},t}]),angular.module("homeModule").controller("indexHomeController",["registerUserConfigFactory","$scope",function(e,o){o.homeMsg="Here is the home",o.authMsg="Here is the Auth message",o.testMessage=e}]),angular.module("userModule").controller("profileUserControlller",["registerUserConfigFactory","$location","$scope",function(e,o,r){r.userInfo=e.getUser(),r.userInfo||o.path("/signin")}]);