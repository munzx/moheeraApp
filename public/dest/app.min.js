"use strict";var moheera=angular.module("moheera",["ui.bootstrap","ui.router","ngResource","authModule","homeModule","userModule","productModule"]);moheera.config(["$urlRouterProvider","$stateProvider",function(e,o){e.otherwise("notfound"),o.state("notfound",{url:"/notfound",templateUrl:"public/modules/config/view/notfound.config.view.html",controller:"errorConfigController"}).state("home",{url:"",templateUrl:"public/modules/home/view/index.home.view.html",controller:"indexHomeController"}).state("contact",{url:"/contact",templateUrl:"public/modules/home/view/contact.home.view.html",controller:"indexHomeController"}).state("about",{url:"/about",templateUrl:"public/modules/home/view/about.home.view.html",controller:"indexHomeController"}).state("signin",{url:"/signin",templateUrl:"public/modules/auth/view/signin.auth.view.html",controller:"signinAuthController"}).state("signup",{url:"/signup",templateUrl:"public/modules/auth/view/signup.auth.view.html",controller:"signupAuthController"}).state("signout",{url:"signout",controller:"signoutAuthController"}).state("profile",{url:"/profile",templateUrl:"public/modules/user/view/profile.user.view.html",controller:"profileUserControlller"}).state("profile.singleProduct",{url:"/product/:id",templateUrl:"public/modules/product/view/single.product.view.html",controller:"profileUserControlller"}).state("user",{url:"/:id",templateUrl:"public/modules/user/view/profile.user.view.html",controller:"profileUserControlller"}).state("user.singleProduct",{url:"/:userId/productId",templateUrl:"public/modules/user/view/profile.user.view.html",controller:"profileUserControlller"})}]).run(["$rootScope",function(e){e.logged=!1}]),angular.module("authModule",[]),angular.module("homeModule",[]),angular.module("productModule",[]),angular.module("userModule",[]),angular.module("moheera").controller("errorConfigController",["$scope",function(){}]),angular.module("moheera").controller("navMenu",["$rootScope","$scope",function(e,o){o.navbarCollapsed=!1,o.$on("$stateChangeSuccess",function(){o.navbarCollapsed=!1}),e.$watch("logged",function(){e.logged?(o.cartLink=!0,o.profileLink=!0,o.reportLink=!0,o.orderLink=!0,o.signOutLink=!0,o.aboutLink=!1,o.contactLink=!1,o.signInLink=!1,o.signUpLink=!1):(o.cartLink=!1,o.profileLink=!1,o.reportLink=!1,o.orderLink=!1,o.signOutLink=!1,o.signInLink=!0,o.signUpLink=!0,o.aboutLink=!0,o.contactLink=!0)})}]),angular.module("moheera").factory("registerUserConfigFactory",["$window","$rootScope","$q",function(e,o,r){var t={};return t.user=!1,t.readUserInfo=function(){return t.user=e.userInfo||!1},t.clearUserInfo=function(){var r=document.getElementById("userInfoBlock");r&&r.parentNode.removeChild(r),o.logged=!1,t.user=e.userInfo=!1},t.setUser=function(r){t.user=e.userInfo=r||!1,t.user&&(o.logged=!0)},t.getUser=function(){var e=r.defer();return e.resolve(t.readUserInfo()),e.promise.then(function(e){e&&(t.user=e,o.logged=!0)}),t.user},t}]),angular.module("authModule").controller("signinAuthController",["registerUserConfigFactory","$scope","$http","$location",function(e,o,r,t){o.signIn=function(){r.post("/login",o.credentials).success(function(o){e.setUser(o),t.path("/profile")}).error(function(e){o.error=e})}}]),angular.module("authModule").controller("signoutAuthController",["registerUserConfigFactory","$http","$location",function(e,o,r){o.get("/logout").success(function(){e.clearUserInfo(),r.path("/home")})}]),angular.module("authModule").controller("signupAuthController",["registerUserConfigFactory","$scope","$http","$location",function(){}]),angular.module("authModule").factory("connectAuthFactory",["$resource",function(e){return e("http://localhost:3000/user",{},{query:{method:"GET"},post:{method:"POST"},update:{method:"PUT"},remove:{method:"DELETE"}})}]),angular.module("homeModule").controller("indexHomeController",["registerUserConfigFactory","$location","$scope",function(e,o,r){r.user=e.getUser(),r.user&&o.path("/profile")}]),angular.module("productModule").controller("singleProductView",["$scope","$rootScope","$location",function(){}]),angular.module("userModule").controller("profileUserControlller",["registerUserConfigFactory","$location","$scope",function(e,o,r){r.userInfo=e.getUser(),r.userInfo||o.path("/signin")}]);